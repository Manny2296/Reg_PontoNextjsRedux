{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar _jsxFileName = \"C:\\\\Users\\\\Riano\\\\Repo\\\\RegistradorPonto\\\\pages\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Link from \"next/link\";\nimport Layout from \"../components/Layout\";\nimport { forwardRef } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { connect } from 'react-redux';\nimport { Button, Box, TextField } from \"@material-ui/core\";\nimport React, { Component } from 'react';\nimport \"../components/index.scss\";\nimport \"../components/Table.scss\";\nimport MaterialTable from 'material-table';\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport { AlertDialog } from './alertDialog';\nconst tableIcons = {\n  Add: forwardRef((props, ref) => __jsx(AddBox, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }))),\n  Check: forwardRef((props, ref) => __jsx(Check, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }))),\n  Clear: forwardRef((props, ref) => __jsx(Clear, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }))),\n  Delete: forwardRef((props, ref) => __jsx(DeleteOutline, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }))),\n  DetailPanel: forwardRef((props, ref) => __jsx(ChevronRight, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }))),\n  Edit: forwardRef((props, ref) => __jsx(Edit, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }))),\n  Export: forwardRef((props, ref) => __jsx(SaveAlt, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }))),\n  Filter: forwardRef((props, ref) => __jsx(FilterList, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }))),\n  FirstPage: forwardRef((props, ref) => __jsx(FirstPage, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }))),\n  LastPage: forwardRef((props, ref) => __jsx(LastPage, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }))),\n  NextPage: forwardRef((props, ref) => __jsx(ChevronRight, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }))),\n  PreviousPage: forwardRef((props, ref) => __jsx(ChevronLeft, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }))),\n  ResetSearch: forwardRef((props, ref) => __jsx(Clear, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }))),\n  Search: forwardRef((props, ref) => __jsx(Search, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }))),\n  SortArrow: forwardRef((props, ref) => __jsx(ArrowDownward, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }))),\n  ThirdStateCheck: forwardRef((props, ref) => __jsx(Remove, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }))),\n  ViewColumn: forwardRef((props, ref) => __jsx(ViewColumn, _extends({}, props, {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  })))\n};\nconst stylebutton = {\n  background: 'linear-gradient(45deg, rgb(254, 107, 139) 30%, rgb(255, 142, 83) 90%)',\n  borderRadius: 3,\n  border: 0,\n  color: 'white',\n  width: '100%',\n  height: 38,\n  padding: '0 10px',\n  boxShadow: '0 2px 5px 2px rgba(255, 105, 135, .3)' // marginLeft: 20,\n  // marginTop: 5,\n  // marginRight: 20\n\n};\n\nclass Index extends Component {\n  static getInitialProps({\n    store,\n    isServer,\n    pathname,\n    query\n  }) {\n    store.dispatch({\n      type: 'ADD_REG_PONTO',\n      payload: null\n    }); // component will be able to read from store's state when rendered\n\n    return {\n      custom: 'custom'\n    }; // you can pass some custom props to component from here\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      columns: [{\n        title: \"Nome Empleado\",\n        field: \"name\"\n      }, {\n        title: \"Numero Documento\",\n        field: \"ndoc\"\n      }, {\n        title: \"Hora ingreso\",\n        field: \"horaingreso\"\n      }, {\n        title: \"Hora saida\",\n        field: \"horasalida\"\n      }],\n      data: this.props.data,\n      ndocUser: null,\n      useradd: null\n    };\n    this._handleNdocUserChange = this._handleNdocUserChange.bind(this);\n  }\n\n  _handleNdocUserChange(event) {\n    console.log(\"Ndoc a batir ponto : \" + event.target.value);\n    this.setState({\n      ndocUser: event.target.value\n    });\n  }\n\n  _handleSaveUser() {\n    const {\n      dispatch\n    } = this.props;\n\n    if (this.state.ndocUser != null) {\n      let numerodocumento = this.state.ndocUser;\n      console.log(\"------> \" + numerodocumento);\n      let usuario_a_batir = this.state.data.filter(function (user) {\n        return user.ndoc == numerodocumento;\n      });\n      console.log(\"El ultimo en batir ponto\" + _JSON$stringify(this.state.data[this.state.data.length - 1].ndoc));\n\n      if (usuario_a_batir.length > 0) {\n        // window.alert(\"Usuario encontrado\");\n\n        /*this.setState(\r\n          {useradd:[{\"name\":usuario_a_batir[0].name, \"ndoc\":usuario_a_batir[0].ndoc ,\"horaingreso\": \"00:00:00\", \"horasalida\":\"00:01:00\"}]}\r\n        )*/\n        var date = new Date().toLocaleString();\n\n        if (_parseInt(_JSON$stringify(this.state.data[this.state.data.length - 1].ndoc)) == this.state.ndocUser) {\n          let usertmp = this.state.data[this.state.data.length - 1];\n          let aupdate = [{\n            \"name\": usertmp.name,\n            \"ndoc\": usertmp.ndoc,\n            \"horaingreso\": usertmp.horaingreso,\n            \"horasalida\": date\n          }];\n          console.log(\"Es una acualizacion a la columna \" + usertmp);\n          this.setState(prevState => {\n            const data = [...prevState.data];\n            data[data.indexOf(usertmp)] = aupdate[0];\n            return _objectSpread({}, prevState, {\n              data\n            });\n          });\n        } else {\n          var date = new Date().toLocaleString(); //     console.log(date + \"------------------<<\")\n\n          let a_inserer = [{\n            \"name\": usuario_a_batir[0].name,\n            \"ndoc\": usuario_a_batir[0].ndoc,\n            \"horaingreso\": date,\n            \"horasalida\": \"--------\"\n          }];\n          const action = {\n            type: \"ADD_REG_PONTO\",\n            payload: a_inserer[0]\n          };\n          this.props.dispatch(action);\n          console.log(usuario_a_batir[0].name + \"---\" + usuario_a_batir[0].ndoc);\n          console.log(\"Ya execute\");\n          this.setState(prevState => {\n            const data = [...prevState.data];\n            data.push(a_inserer[0]);\n            return _objectSpread({}, prevState, {\n              data\n            });\n          });\n        }\n      } else {\n        window.alert(\"Usuario no encontrado,porfavor digite um Numero de Documento valido \");\n      }\n    } else {\n      window.alert(\"Usuario no encontrado,porfavor digite um Numero de Documento valido \");\n    }\n  }\n\n  render() {\n    //console.log(this.props)\n    //console.log(\"render element with props \" + JSON.stringify(this.props.data));\n    return __jsx(Layout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, __jsx(\"h3\", {\n      className: \"firstlbl\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \" Bienvenido a MF.RegistroPonto \"), __jsx(Box, {\n      className: \"containerDataBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, __jsx(TextField, {\n      label: \"Numero de Documento\",\n      onChange: this._handleNdocUserChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), __jsx(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }), __jsx(Button, {\n      variant: \"contained\",\n      style: stylebutton,\n      onClick: this._handleSaveUser.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Batir Ponto \")), __jsx(MaterialTable, {\n      icons: tableIcons,\n      title: \"Pontos batidos hoje\",\n      columns: this.state.columns,\n      data: this.state.data,\n      actions: [{\n        icon: AccountCircleIcon,\n        tooltip: 'User Profile',\n        onClick: (event, rowData) => //alert(\"You saved \" + rowData.name)window.location.href\n        window.location.href = `/user/${rowData.ndoc}`\n      }],\n      editable: {\n        /* onRowAdd: newData =>\r\n           new Promise(resolve => {\r\n             setTimeout(() => {\r\n               resolve();\r\n               this.setState(prevState => {\r\n                 const data = [...prevState.data];\r\n                 data.push(newData);\r\n                 return { ...prevState, data };\r\n               });\r\n             }, 600);\r\n           }),\r\n         onRowUpdate: (newData, oldData) =>\r\n           new Promise(resolve => {\r\n             setTimeout(() => {\r\n               resolve();\r\n               if (oldData) {\r\n                 this.setState(prevState => {\r\n                   const data = [...prevState.data];\r\n                   data[data.indexOf(oldData)] = newData;\r\n                   return { ...prevState, data };\r\n                 });\r\n               }\r\n             }, 600);\r\n           }),*/\n        onRowDelete: oldData => new _Promise(resolve => {\n          setTimeout(() => {\n            resolve();\n            this.setState(prevState => {\n              const data = [...prevState.data];\n              data.splice(data.indexOf(oldData), 1);\n              return _objectSpread({}, prevState, {\n                data\n              });\n            });\n          }, 600);\n        })\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), __jsx(\"a\", {\n      href: \"http://eco2.com.co\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default connect(state => state)(Index);","map":{"version":3,"sources":["C:/Users/Riano/Repo/RegistradorPonto/pages/index.js"],"names":["Link","Layout","forwardRef","makeStyles","connect","Button","Box","TextField","React","Component","MaterialTable","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","SaveAlt","Search","ViewColumn","AccountCircleIcon","AlertDialog","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","stylebutton","background","borderRadius","border","color","width","height","padding","boxShadow","Index","getInitialProps","store","isServer","pathname","query","dispatch","type","payload","custom","constructor","state","columns","title","field","data","ndocUser","useradd","_handleNdocUserChange","bind","event","console","log","target","value","setState","_handleSaveUser","numerodocumento","usuario_a_batir","filter","user","ndoc","length","date","Date","toLocaleString","usertmp","aupdate","name","horaingreso","prevState","indexOf","a_inserer","action","push","window","alert","render","icon","tooltip","onClick","rowData","location","href","onRowDelete","oldData","resolve","setTimeout","splice"],"mappings":"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","sourcesContent":["import Link from \"next/link\";\r\n\r\nimport Layout from \"../components/Layout\";\r\nimport { forwardRef } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\n\r\nimport { Button, Box, TextField} from \"@material-ui/core\";\r\nimport React, { Component } from 'react';\r\n\r\nimport \"../components/index.scss\"\r\nimport \"../components/Table.scss\"\r\nimport MaterialTable from 'material-table';\r\nimport AddBox from '@material-ui/icons/AddBox';\r\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\r\nimport Check from '@material-ui/icons/Check';\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRight from '@material-ui/icons/ChevronRight';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\r\nimport Edit from '@material-ui/icons/Edit';\r\nimport FilterList from '@material-ui/icons/FilterList';\r\nimport FirstPage from '@material-ui/icons/FirstPage';\r\nimport LastPage from '@material-ui/icons/LastPage';\r\nimport Remove from '@material-ui/icons/Remove';\r\nimport SaveAlt from '@material-ui/icons/SaveAlt';\r\nimport Search from '@material-ui/icons/Search';\r\nimport ViewColumn from '@material-ui/icons/ViewColumn';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport {AlertDialog} from './alertDialog'\r\nconst tableIcons = {\r\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\r\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\r\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\r\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\r\n  DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\r\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\r\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\r\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\r\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\r\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\r\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\r\n  PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\r\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\r\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\r\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\r\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\r\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\r\n  \r\n};\r\nconst stylebutton = {\r\n  background: 'linear-gradient(45deg, rgb(254, 107, 139) 30%, rgb(255, 142, 83) 90%)',\r\n  borderRadius: 3,\r\n  border: 0,\r\n  color: 'white',\r\n  width : '100%',\r\n  height: 38,\r\n  padding: '0 10px',\r\n  boxShadow: '0 2px 5px 2px rgba(255, 105, 135, .3)',\r\n // marginLeft: 20,\r\n // marginTop: 5,\r\n // marginRight: 20\r\n};\r\n\r\nclass Index extends Component {\r\n  static getInitialProps({store, isServer, pathname, query}) {\r\n    store.dispatch({type: 'ADD_REG_PONTO', payload:null\r\n    }); // component will be able to read from store's state when rendered\r\n    return {custom: 'custom'}; // you can pass some custom props to component from here\r\n}\r\n    constructor(props){\r\n    \r\n      super(props)\r\n\r\n       this.state = { \r\n         columns:[{title:\"Nome Empleado\", field:\"name\"},\r\n             {title:\"Numero Documento\", field:\"ndoc\"},\r\n             {title:\"Hora ingreso\", field:\"horaingreso\"},\r\n             {title:\"Hora saida\", field:\"horasalida\"}\r\n\r\n        ],\r\n        \r\n      data: this.props.data, \r\n      ndocUser: null,\r\n      useradd : null\r\n  }\r\n  this._handleNdocUserChange = this._handleNdocUserChange.bind(this);\r\n    }\r\n    \r\n   \r\n    _handleNdocUserChange(event){\r\n      console.log(\"Ndoc a batir ponto : \" + event.target.value)\r\n    this.setState({ndocUser : event.target.value})\r\n    }\r\n    _handleSaveUser(){\r\n      const {dispatch} = this.props;\r\n      if(this.state.ndocUser != null){\r\n        let numerodocumento = this.state.ndocUser\r\n        console.log(\"------> \" +numerodocumento);\r\n\r\n        let usuario_a_batir = this.state.data.filter(function(user){\r\n          return user.ndoc == numerodocumento\r\n        })\r\n        console.log(\"El ultimo en batir ponto\" + JSON.stringify(this.state.data[this.state.data.length-1].ndoc))\r\n      if(usuario_a_batir.length > 0){\r\n      // window.alert(\"Usuario encontrado\");\r\n        /*this.setState(\r\n          {useradd:[{\"name\":usuario_a_batir[0].name, \"ndoc\":usuario_a_batir[0].ndoc ,\"horaingreso\": \"00:00:00\", \"horasalida\":\"00:01:00\"}]}\r\n        )*/\r\n        var date = new Date().toLocaleString();\r\n        if( parseInt(JSON.stringify(this.state.data[this.state.data.length-1].ndoc)) == this.state.ndocUser){\r\n          let usertmp = this.state.data[this.state.data.length-1]\r\n          let aupdate =[{\"name\": usertmp.name, \"ndoc\": usertmp.ndoc,\"horaingreso\":usertmp.horaingreso, \"horasalida\":date}] \r\n          console.log(\"Es una acualizacion a la columna \" + usertmp)\r\n           this.setState(prevState => {\r\n            const data = [...prevState.data];\r\n            data[data.indexOf(usertmp)] = aupdate[0];\r\n            return { ...prevState, data };\r\n          });\r\n        }\r\n        else{\r\n          var date = new Date().toLocaleString();\r\n     //     console.log(date + \"------------------<<\")\r\n          let a_inserer = [{\"name\": usuario_a_batir[0].name, \"ndoc\": usuario_a_batir[0].ndoc,\"horaingreso\":date, \"horasalida\":\"--------\"}]\r\n          const action = { type: \"ADD_REG_PONTO\", payload: a_inserer[0]}\r\n          this.props.dispatch(action)\r\n          console.log(usuario_a_batir[0].name + \"---\" + usuario_a_batir[0].ndoc)\r\n        console.log(\"Ya execute\")\r\n          this.setState(prevState => {\r\n            const data = [...prevState.data];\r\n            data.push(a_inserer[0]);\r\n            return { ...prevState, data };\r\n          });\r\n        }\r\n \r\n      }\r\n      else{\r\n        window.alert(\"Usuario no encontrado,porfavor digite um Numero de Documento valido \");\r\n\r\n      }\r\n      }\r\n      else{\r\n       window.alert(\"Usuario no encontrado,porfavor digite um Numero de Documento valido \");\r\n      }\r\n \r\n    }\r\n    \r\n  render() {\r\n    //console.log(this.props)\r\n    //console.log(\"render element with props \" + JSON.stringify(this.props.data));\r\n    return (\r\n      <Layout>\r\n    \r\n    <div>\r\n    \r\n      <h3 className=\"firstlbl\"> Bienvenido a MF.RegistroPonto </h3>\r\n     \r\n\r\n     <Box className='containerDataBox' >\r\n          \r\n         <TextField  label=\"Numero de Documento\" onChange={this._handleNdocUserChange} />\r\n         <br/>\r\n         <Button  variant=\"contained\" style={stylebutton}  onClick={this._handleSaveUser.bind(this)} >Batir Ponto </Button>\r\n        \r\n       </Box>\r\n     \r\n       <MaterialTable\r\n       icons={tableIcons}\r\n      title=\"Pontos batidos hoje\"\r\n      columns={this.state.columns}\r\n      data={this.state.data}\r\n      actions={[\r\n        {\r\n          icon: AccountCircleIcon,\r\n          tooltip: 'User Profile',\r\n          onClick: (event, rowData) => //alert(\"You saved \" + rowData.name)window.location.href\r\n          window.location.href = `/user/${rowData.ndoc}`\r\n           \r\n        }\r\n       ]}\r\n      editable={{\r\n       /* onRowAdd: newData =>\r\n          new Promise(resolve => {\r\n            setTimeout(() => {\r\n              resolve();\r\n              this.setState(prevState => {\r\n                const data = [...prevState.data];\r\n                data.push(newData);\r\n                return { ...prevState, data };\r\n              });\r\n            }, 600);\r\n          }),\r\n        onRowUpdate: (newData, oldData) =>\r\n          new Promise(resolve => {\r\n            setTimeout(() => {\r\n              resolve();\r\n              if (oldData) {\r\n                this.setState(prevState => {\r\n                  const data = [...prevState.data];\r\n                  data[data.indexOf(oldData)] = newData;\r\n                  return { ...prevState, data };\r\n                });\r\n              }\r\n            }, 600);\r\n          }),*/\r\n        onRowDelete: oldData =>\r\n          new Promise(resolve => {\r\n            setTimeout(() => {\r\n              resolve();\r\n              this.setState(prevState => {\r\n                const data = [...prevState.data];\r\n                data.splice(data.indexOf(oldData), 1);\r\n                return { ...prevState, data };\r\n              });\r\n            }, 600);\r\n          }),\r\n      }}\r\n    />  \r\n      \r\n    \r\n   \r\n    <a href=\"http://eco2.com.co\">\r\n    {/*<img className=\"imgstyle\"  src={require('../components/image/flower-2.png')}/>*/}\r\n    </a>\r\n    </div>\r\n  </Layout>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default connect(\r\n  (state) => state,\r\n \r\n)(Index);"]},"metadata":{},"sourceType":"module"}